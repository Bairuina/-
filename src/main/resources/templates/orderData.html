<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{../css/orderData.css}">
    <script th:src="@{/js/jquery-3.4.1.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <title>订单详情页</title>
</head>

<body>
    <div th:if="${allData.data==null}">
        无该订单信息！！
    </div>
    <div th:if="${allData.data!=null}" class="management">
        <div class="classifys">
            <ul>
                <li>订单信息</li>
                <li>商品信息</li>
                <li>配件信息</li>
                <li style="border: 0px">服务信息</li>
            </ul>
        </div>
        <div class="content">
            <div class="classify order">
                <ul class="title">
                    <li>送货城市</li>
                    <li>送货区/县</li>
                    <li>送货地址</li>
                    <li>订单编号</li>
                    <li>采购人名称</li>
                    <li>需方联系人</li>
                    <li>需方电话</li>
                    <li>电商名称</li>
                    <li>订单金额</li>
                    <li>订单提交时间</li>
                    <li>订单状态</li>
                    <li>支付方式</li>
                    <li>发票抬头</li>
                    <li>纳税人识别号</li>
                    <li>是否需要安装服务</li>
                    <li>订单备注说明</li>
                    <li>收货时间</li>
                    <li>收货期限</li>
                    <li>发票内容</li>
                </ul>
                <ul class="message">
                    <li><span th:text="${allData.data[4]}"></span></li>
                    <li><span th:text="${allData.data[5]}"></span></li>
                    <li><span th:text="${allData.data[0].shdd}"></span></li>
                    <li ><span id="ddbhData"  th:text="${allData.data[0].ddbh}"></span></li>
                    <li><span th:text="${allData.data[0].cgrmc}"></span></li>
                    <li><span th:text="${allData.data[0].xflxrxm}"></span></li>
                    <li><span th:text="${allData.data[0].xfdh}"></span></li>
                    <li><span th:text="${allData.data[0].ghsmc}"></span></li>
                    <li><span th:text="${allData.data[0].ddze}"></span><span>元</span></li>
                    <li><span th:text="${allData.data[0].cjrq}"></span></li>
                    <li id="ztDataWordLi" th:data-ztdata="${allData.data[0].zt}">
                        <span class="orderZtData" th:if="${allData.data[0].zt=='2'}">供应商待确认</span>
                        <span class="orderZtData" th:if="${allData.data[0].zt=='3'}">待验收</span>
                        <span class="orderZtData" th:if="${allData.data[0].zt=='4'}">订单已取消</span>
                        <span class="orderZtData" th:if="${allData.data[0].zt=='5'}">验收通过</span>
                    </li>
                    <li>
                        <span th:if="${allData.data[0].zffs=='70080001'}">现金</span>
                        <span th:if="${allData.data[0].zffs=='70080002'}">公务卡结算 </span>
                        <span th:if="${allData.data[0].zffs=='70080003'}">银行转账</span>
                        <span th:if="${allData.data[0].zffs=='70080004'}">银行支票</span>
                    </li>
                    <li><span th:text="${allData.data[0].fptt}"></span></li>
                    <li>
                        <span th:if="${allData.data[0].nsrsbh==null}">暂无相关信息</span></li>
                        <span  th:if="${allData.data[0].nsrsbh!=null}" th:text="${allData.data[0].nsrsbh}"></span></li>
                    <li>
                        <span th:if="${allData.data[0].sfxyazfw=='0'}">需要安装服务</span>
                        <span th:if="${allData.data[0].sfxyazfw=='1'}">不需要安装服务</span>
                        <span th:if="${allData.data[0].sfxyazfw==null}">暂无相关信息</span>
                    </li>
                    <li>
                        <span th:if="${allData.data[0].beiz!=null}" th:text="${allData.data[0].beiz}"></span>
                        <span th:if="${allData.data[0].beiz==null}">暂无相关信息</span>
                    </li>
                    <li>
                        <span th:if="${allData.data[0].shsj!=null}" th:text="${allData.data[0].shsj}"></span>
                        <span th:if="${allData.data[0].shsj==null}">暂无相关信息</span>
                    </li>
                    <li>

                        <span th:if="${allData.data[0].shqx=='0'}">不限</span>
                        <span th:if="${allData.data[0].shqx=='1'}">一天内</span>
                        <span th:if="${allData.data[0].shqx=='2'}">两天内</span>
                        <span th:if="${allData.data[0].shqx=='3'}">三天内</span>
                        <span th:if="${allData.data[0].shqx=='5'}">五天内</span>
                        <span th:if="${allData.data[0].shqx=='7'}">七天内</span>
                        <span th:if="${allData.data[0].shqx==null}">暂无相关信息</span>
                    </li>
                    <li>
                        <span th:if="${allData.data[0].fpnr=='70100001'}">商品明细</span>
                        <span th:if="${allData.data[0].fpnr=='70100002'}">办公耗材</span>
                        <span th:if="${allData.data[0].fpnr=='70100003'}">办公用品</span>
                        <span th:if="${allData.data[0].fpnr==null}">暂无相关信息</span>
                    </li>
                </ul>
            </div>
            <div class="classify">
            <div class="classify">
                <div th:if="${allData.data[1]==null}">
                    该订单没有相关商品信息！
                </div>
                <div th:if="${allData.data[1]!=null}" th:each="productData:${allData.data[1]}">
                <ul class="title">
                    <li>型号编号</li>
                    <li>型号名称</li>
                    <li>品牌编号</li>
                    <li>品牌名称</li>
                    <li>购买数量</li>
                    <li>商品的实际价格</li>
                    <li>小计价格</li>
                </ul>
                <ul class="message">
                    <li><span th:text="${productData.xhbh}" ></span></li>
                    <li>
                        <span th:if="${productData.xhmc==null}">暂无相关信息</span>
                        <span th:if="${productData.xhmc!=null}" th:text="${productData.xhmc}"></span>
                    </li>
                    <li><span th:text="${productData.ppbh}" ></span></li>
                    <li><span th:text="${productData.ppmc}" ></span></li>
                    <li><span th:text="${productData.sl}" ></span></li>
                    <li><span th:text="${productData.sjjg}" ></span><span>元</span></li>
                    <li><span th:text="${productData.xjjg}" ></span><span>元</span></li>
                </ul>
                </div>
            </div>
            <div class="classify">
                <div th:if="${allData.data[2]==null}">
                    该订单没有相关配件信息！
                </div>
                <div th:if="${allData.data[2]!=null}" th:each="accesssData:${allData.data[2]}">
                <ul class="title">
                    <li>配件名称</li>
                    <li>配件数量</li>
                    <li>配件单价</li>
                </ul>
                <ul class="message">
                    <li><span th:text="${accesssData.pjmc}"></span></li>
                    <li><span th:text="${accesssData.sl}"></span><span>个</span> </li>
                    <li><span th:text="${accesssData.pjjg}"></span><span>元</span></li>
                </ul>
                </div>
            </div>
            <div class="classify" style="border: 0px">
                <div th:if="${allData.data[3]==null}">
                    该订单没有相关服务信息！
                </div>
                <div th:if="${allData.data[3]!=null}" th:each="serviceData:${allData.data[3]}">
                <ul class="title">
                    <li>服务名称</li>
                    <li>服务数量</li>
                    <li>服务单价</li>
                </ul>
                <ul class="message">
                    <li><span th:text="${serviceData.fwMC}"></span></li>
                    <li><span th:text="${serviceData.sl}"></span></li>
                    <li><span th:text="${serviceData.fwjg}"></span><span>元</span></li>
                </ul>
                </div>
            </div>
            <div class="tole_nav">
                <div class="tole">
                    <span class="zongji">总计:</span>
                    <span>2500元</span>
                </div>
            </div>
            <div class="order_submit">
                <a style="text-decoration: none" class="lookContract" href="javascript:void(0)">查看合同</a>
                <button class="yes_order">确定订单</button>
                <button  class="no_order">拒绝订单</button>
                <button class="checkInvoice" th:if="${allData.data[0].fpkjsj==0}">开具发票</button>
                <button class="checkInvoice" th:if="${allData.data[0].fpkjsj!=0}"> 收到发票</button>
                <button class="collectionConfirm" data-toggle="modal" data-target="#collection_Confirm" >确认收款</button>
            </div>

        </div>
    </div>

    <div class="modal fade" id="collection_Confirm">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">添加收款信息</h4>
                </div>
                <div class="modal-body collection" >
                    收款标志：<input type="text" name="skbz" id="skbz" list="sexlist" autocomplete="off">
                    <datalist id="sexlist">
                        <option>已收款</option>
                        <option>未收款</option>
                    </datalist>
                    <br>
                    收款金额：<input name="skje" id="skje" >
                    <br>
                    收款时间：<input name="sksj" id="sksj" >
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" onclick="update()">提交更改</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script th:src="@{/js/websocket.js}"></script>
<script th:src="@{/js/OrderDate.js}"></script>
<script th:src="@{/js/upLoadData.js}"></script>
</html>